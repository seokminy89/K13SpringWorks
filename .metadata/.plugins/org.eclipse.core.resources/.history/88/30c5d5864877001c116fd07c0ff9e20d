package com.kosmo.springlegacy;

import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;


@Controller
public class HomeController {
	
	private static final Logger logger = LoggerFactory.getLogger(HomeController.class);
	
	//get방식이 디폴트이므로 post방식이 아닌 경우 이렇까지 줄일 수 있음.
	@RequestMapping("/")
	public String home(Locale locale, Model model) {
		logger.info("Welcome home! The client locale is {}.", locale);
		
		Date date = new Date();
		DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);
		
		String formattedDate = dateFormat.format(date);
		
		model.addAttribute("serverTime", formattedDate );
		
		return "home";
	}
	
	/*
	컨트롤러 만드는 순서
	1. 요청명을 먼저 생성한다.
	2. 요청명을 통해 컨트롤러를 찾아 매핑된 메서드를 호출한다.
		컨트롤러에서는 매핑명을 통해 메서드를 호출하므로 메서드명은
		크게 중요치 않고, 중복되지 않는 정도의 이름을 사용하면 된다.
		매핑시에는 @RequestMapping 어노테이션을 사용한다.
	*/
	@RequestMapping("/home/helloSpring")
	public String helloSpring(Model model) {
		
		/*
		3.요청을 처리한다.
		*/
		String firstMessage = "My first Spring MVC 컨트롤러";
		model.addAttribute("firstMessage", firstMessage);
		return "HelloSpring";
	}
	
	
}
